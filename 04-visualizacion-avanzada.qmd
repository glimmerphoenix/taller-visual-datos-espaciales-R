# Visualización avanzada

## Representación de datos espaciales

Dominic Royé ha creado recientemente un taller titulado 
[Breve introducción a la cartografía con R](https://github.com/dominicroye/Taller_Carto_RqueR_2024), que
muestra algunos ejemplos básicos sobre cómo manejar este tipo de datos.

![Representación gráfica de la red de ríos de la cuenca hidrográfica del Ebro. El grosor de línea se corresponde con el caudal promedio de cada río. Fuente: <https://github.com/dominicroye/Taller_Carto_RqueR_2024>.](img/Ebro-rivers.png){#fig-Ebro-rivers width=95%}

![Modelo digital del terreno (MDT) de Suiza. Se ha añadido efecto de sombreado para interpretar mejor el relieve de cada zona. Fuente: <https://github.com/dominicroye/Taller_Carto_RqueR_2024>.](img/MDT-Switzerland.png){#fig-MDT-Switzerland width=95%}


Por supuesto, se pueden realizar todo tipo de representaciones más clásicas, como los mapas de coropletas
en versión estática (@fig-choropleth-map) como interactiva (@fig-choropleth-leaflet), utilizando la biblioteca JavaScript
[Leaflet](https://leafletjs.com/).

```{r}
#| label: fig-choropleth-map
#| fig-cap: "Mapa de coropletas clásico mostrando nacimientos en 1974 en los condados del estado de Carolina del Norte (EE.UU.). Fuente: <https://r-spatial.org/book/01-hello.html>."
#| message: false

library(tidyverse)
library(sf)
system.file("gpkg/nc.gpkg", package="sf") |>
    read_sf() -> nc
nc.32119 <- st_transform(nc, 'EPSG:32119')
nc.32119 |>
    select(BIR74) |>
    plot(graticule = TRUE, axes = TRUE)
```

```{r}
#| label: fig-choropleth-leaflet
#| fig-cap: "Mapa de coropletas interactivo usando Leaflet. Fuente: <https://r-spatial.org/book/01-hello.html>."

library(mapview) |> suppressPackageStartupMessages()
mapviewOptions(fgb = FALSE)
nc.32119 |> mapview(zcol = "BIR74", legend = TRUE, col.regions = sf.colors)
```
